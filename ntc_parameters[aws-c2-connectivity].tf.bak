locals {
  # ntc_parameters = module.ntc_parameters_reader_connectivity.parameter_map
  ntc_parameters_connectivity = {
    # this node contains module parameters which are provisioned in core_connectivity account
    "vpc_module" : { "input1" : "value1", "input2" : ["value2"], "input3" : 3 },
    "ipam_module" : { "input1" : "value1", "input2" : ["value2"], "input3" : 3 },
  }
}

# ---------------------------------------------------------------------------------------------------------------------
# ¦ CORE PARAMETERS - READER
# ---------------------------------------------------------------------------------------------------------------------
module "ntc_parameters_reader_connectivity" {
  source = "github.com/nuvibit/terraform-aws-ntc-parameters//modules/reader?ref=feat-init"

  bucket_name = "ntc-parameters-c2"
}

# ---------------------------------------------------------------------------------------------------------------------
# ¦ CORE PARAMETERS - WRITER
# ---------------------------------------------------------------------------------------------------------------------
module "ntc_parameters_writer_connectivity" {
  source = "github.com/nuvibit/terraform-aws-ntc-parameters//modules/writer?ref=feat-init"

  bucket_name     = "ntc-parameters-c2"
  parameter_node  = "connectivity"
  node_parameters = local.ntc_parameters_connectivity

  providers = {
    aws = aws.aws-c2-connectivity
  }
}
